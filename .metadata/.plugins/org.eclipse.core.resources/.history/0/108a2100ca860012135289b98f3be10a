package villa.game.room;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.Iterator;

import villa.game.object.GameObject;

public class ObjectsHolder
{
	private ArrayList<GameObject> objects = new ArrayList<GameObject>();
	private HashSet<GameObject> spawn = new HashSet<GameObject>();
	
	/* Object Management */
	/**
	 * @return all the objects in the holder
	 */
	public ArrayList<GameObject> get_objects()
	{
		return this.objects;
	}//END get_objects
	
	/**
	 * Adds an object to the holder to later be spawned.
	 * 
	 * @param obj the object to add
	 */
	public void add_object(GameObject obj)
	{
		this.spawn.add(obj);
	}//END add_obj

	/**
	 * Adds the objects from the spawn list to the main list.
	 */
	private void spawn_objects()
	{
		Iterator<GameObject> iter = this.spawn.iterator();
		while(iter.hasNext())
		{
			GameObject obj = iter.next();
			this.objects.add(obj);
			iter.remove();
		}//elihw
	}//END spawn_objects
	
	/* Update */
	public void update(float dt)
	{
		this.spawn_objects();
	}//END update
	
	private void step_objects(float dt)
	{
		Iterator<GameObject> iter = this.objects.iterator();
		while(iter.hasNext())
		{
			GameObject obj = iter.next();
			obj.step(dt, this);
		}
	}
}
